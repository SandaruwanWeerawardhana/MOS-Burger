const Burger = [
    { itemCode: "B1001", itemName: "Classic Burger", price: 750.00, discount: 0, img: "https://images.pexels.com/photos/5554607/pexels-photo-5554607.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1" },
    { itemCode: "B1002", itemName: "Classic Burger", price: 1500.00, discount: 15, img: "https://images.pexels.com/photos/1556698/pexels-photo-1556698.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1" },
    { itemCode: "B1003", itemName: "Turkey Burger", price: 1600.00, discount: 0, img: "https://images.pexels.com/photos/3738730/pexels-photo-3738730.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1" },
    { itemCode: "B1004", itemName: "Chicken Burger", price: 1400.00, discount: 0, img: "https://images.pexels.com/photos/15832879/pexels-photo-15832879/free-photo-of-cheeseburger-with-french-fries-and-three-dipping-sauces.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1" },
    { itemCode: "B1005", itemName: "Chicken Burger", price: 800.00, discount: 20, img: "https://images.pexels.com/photos/552056/pexels-photo-552056.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1" },
    { itemCode: "B1006", itemName: "Cheese Burger", price: 1000.00, discount: 0, img: "https://images.pexels.com/photos/13163534/pexels-photo-13163534.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1" },
    { itemCode: "B1007", itemName: "Cheese Burger", price: 600.00, discount: 0, img: "https://images.pexels.com/photos/580612/pexels-photo-580612.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1" },
    { itemCode: "B1008", itemName: "Bacon Burger", price: 650.00, discount: 15, img: "https://images.pexels.com/photos/15146310/pexels-photo-15146310/free-photo-of-burgere-on-plate.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1" },
    { itemCode: "B1009", itemName: "Shawarma Burger", price: 800.00, discount: 0, img: "https://images.pexels.com/photos/18188571/pexels-photo-18188571/free-photo-of-burger-and-a-shawarma.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1" },
    { itemCode: "B1010", itemName: "Olive Burger", price: 1800.00, discount: 0, img: "https://images.pexels.com/photos/11401287/pexels-photo-11401287.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1" },
    { itemCode: "B1012", itemName: "Cheese Burger", price: 1250.00, discount: 20, img: "https://images.pexels.com/photos/10922927/pexels-photo-10922927.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1" },
    { itemCode: "B1013", itemName: "Crispy Burger", price: 1200.00, discount: 0, img: "https://images.pexels.com/photos/6896379/pexels-photo-6896379.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1" },
    { itemCode: "B1014", itemName: "Chicken Burger", price: 1600.00, discount: 10, img: "https://images.pexels.com/photos/5474640/pexels-photo-5474640.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1" },
    { itemCode: "B1015", itemName: "Paneer Burger", price: 900.00, discount: 0, img: "https://images.pexels.com/photos/1556688/pexels-photo-1556688.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1" }];
  
    // Submarines
    const Submarines = [
    { itemCode: "B1016", itemName: "Crispy Submarine", price: 2000.00, discount: 0,img:"https://images.pexels.com/photos/7595072/pexels-photo-7595072.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1" },
    { itemCode: "B1017", itemName: "Chicken Submarine", price: 1500.00, discount: 0,img:"https://images.pexels.com/photos/7595073/pexels-photo-7595073.jpeg?auto=compress&cs=tinysrgb&w=600" },
    { itemCode: "B1018", itemName: "Chicken Submarine", price: 1800.00, discount: 3,img:"https://media.istockphoto.com/id/2149693429/photo/sandwich-one-fresh-big-submarine-sandwich-with-ham-cheese-lettuce-tomatoes-and-microgreens-on.webp?a=1&b=1&s=612x612&w=0&k=20&c=itGnQ8ll2i7tS0Alef39zqyd1krP72RdtIqcONPm-QU=" },
    { itemCode: "B1019", itemName: "Chicken Submarine", price: 1400.00, discount: 0,img:"https://media.istockphoto.com/id/157718121/photo/foot-long-ham-and-swiss-cheese-sub.webp?a=1&b=1&s=612x612&w=0&k=20&c=3HuT3jrMfztas9I4e7T1wS7n-iIaPdapn3I9A5ZoT_g=" },
    { itemCode: "B1020", itemName: "Grinder Submarine", price: 2300.00, discount: 0,img:"https://www.sargento.com/assets/Uploads/Recipe/Image/Sargento11501__FillWzExNzAsNTgzXQ.jpg" },
    { itemCode: "B1021", itemName: "Cheese Submarine", price: 2200.00, discount: 0 ,img:"https://images.pexels.com/photos/1633525/pexels-photo-1633525.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1"},
    { itemCode: "B1022", itemName: "Cheese Submarine", price: 1900.00, discount: 16,img:"https://www.foodrepublic.com/img/gallery/tiktoks-viral-grinder-sandwich-is-basically-a-better-salad/intro-1694677635.jpg" },
    { itemCode: "B1023", itemName: "Horgie Submarine", price: 2800.00, discount: 0 ,img:"https://i.shgcdn.com/2bbb0953-8b9f-4a81-b717-1d7cb1644e55/-/format/auto/-/preview/3000x3000/-/quality/lighter/"},
    { itemCode: "B1024", itemName: "MOS Submarine", price: 3000.00, discount: 0,img:"https://images.pexels.com/photos/20867465/pexels-photo-20867465/free-photo-of-sandwich-on-plate.jpeg?auto=compress&cs=tinysrgb&w=600" }];
  
    // Fries
    const Fries = [
    { itemCode: "B1025", itemName: "Steak Fries", price: 1200.00, discount: 0 ,img:"https://www.paintthekitchenred.com/wp-content/uploads/2022/03/Air-fryer-frozen-steak-fries-L1-Paint-the-Kitchen-Red-scaled.jpg"},
    { itemCode: "B1026", itemName: "Steak Fries", price: 600.00, discount: 0 ,img:"https://www.pinkwhen.com/wp-content/uploads/2023/05/Red-Robin-Frozen-Steak-Fries-in-Air-Fryer-1-500x375.jpg"},
    { itemCode: "B1027", itemName: "French Fries", price: 800.00, discount: 0 ,img:"https://recipes.net/wp-content/uploads/2023/05/johnnys-bacon-cheese-fries-recipe_8536f8fd0bcf26e94e04352e8d2b48ba.jpeg"},
    { itemCode: "B1028", itemName: "French Fries", price: 650.00, discount: 0 ,img:"https://thissillygirlskitchen.com/wp-content/uploads/2020/02/homemade-french-fries-8-1.jpg"},
    { itemCode: "B1029", itemName: "French Fries", price: 450.00, discount: 0 ,img:"https://www.indianveggiedelight.com/wp-content/uploads/2019/07/air-fryer-potato-fries-featured.jpg"},
    { itemCode: "B1030", itemName: "Potato Fries", price: 600.00, discount: 0 ,img:"https://www.cubesnjuliennes.com/wp-content/uploads/2021/01/Baked-Sweet-Potato-Fries-Recipe.jpg"}];
  
    // Pasta
    const Pasta = [
    { itemCode: "B1031", itemName: "Cheese Pasta", price: 1600.00, discount: 15,img:"https://saltedmint.com/wp-content/uploads/2018/05/Creamy-tuscan-tomato-pasta-2.jpg" },
    { itemCode: "B1032", itemName: "Chicken Pasta", price: 1700.00, discount: 0,img:"https://www.vincenzosplate.com/wp-content/uploads/2021/08/610x350-Photo-4_862-How-to-Make-CHICKEN-PASTA-Like-an-Italian-V1.jpg"  },
    { itemCode: "B1033", itemName: "Turkey Pasta", price: 2900.00, discount: 10,img:"https://assets.epicurious.com/photos/5988e3458e3ab375fe3c0caf/1:1/w_3607,h_3607,c_limit/How-to-Make-Chicken-Alfredo-Pasta-hero-02082017.jpg"  },
    { itemCode: "B1034", itemName: "Shrimp Pasta", price: 2000.00, discount: 0,img:"https://www.sipandfeast.com/wp-content/uploads/2023/01/spicy-creamy-mushroom-pasta-snippet.jpg"  },
    { itemCode: "B1035", itemName: "Lemon Pasta", price: 1950.00, discount: 0,img:"https://shortgirltallorder.com/wp-content/uploads/2021/07/lemon-butter-pasta-square.jpg"  },
    { itemCode: "B1036", itemName: "Tagliatelle Pasta", price: 2400.00, discount: 1,img:"https://images.themodernproper.com/billowy-turkey/production/posts/PastaPrimavera_10.jpg?w=1200&h=1200&q=60&fm=jpg&fit=crop&dm=1719193287&s=0104e0b241aea73e5709db128503d749"  },
    { itemCode: "B1037", itemName: "Baked Ravioli", price: 2000.00, discount: 1 ,img:"https://cdn.loveandlemons.com/wp-content/uploads/opengraph/2022/06/pasta-primavera-1.jpg" }];
  
    // Chicken
    const Chicken = [
    { itemCode: "B1038", itemName: "Fried Chicken", price: 1200.00, discount: 0,img:"https://christieathome.com/wp-content/uploads/2020/10/Facetune_06-10-2020-15-37-58-scaled.jpg" },
  { itemCode: "B1039", itemName: "Fried Chicken", price: 2300.00, discount: 10,img:"https://www.therusticelk.com/wp-content/uploads/2018/09/Southern-fried-chicken-2.jpg" },
  { itemCode: "B1040", itemName: "Fried Chicken", price: 3100.00, discount: 5,img:"https://airfryermom.com/wp-content/uploads/2022/05/Cook-Fried-Chicken-in-Air-Fryer.jpg" },
  { itemCode: "B1041", itemName: "Hot Wings", price: 2400.00, discount: 0 ,img:"https://www.browneyedbaker.com/wp-content/uploads/2020/12/buttermilk-fried-chicken-12-square.jpg"},
  { itemCode: "B1042", itemName: "Devilled Chicken", price: 900.00, discount: 0,img:"https://foodserviceindia.com/wp-content/uploads/2023/07/Frame-65.jpg" },
  { itemCode: "B1043", itemName: "BBQ Chicken", price: 2100.00, discount: 0,img:"https://poshjournal.com/wp-content/uploads/2021/02/thai-bbq-chicken-wings-8.jpg" }];
    // Beverages
    const Beverages = [   
   { itemCode: "B1044", itemName: "Pepsi", price: 990.00, discount: 5,img:"https://www.ocado.com/productImages/612/612029011_1_640x640.jpg?identifier=03aff14ac20f6f9db3749cf29dd865b7" },
    { itemCode: "B1045", itemName: "Coca-Cola", price: 1230.00, discount: 0,img:"https://i.pinimg.com/originals/99/af/9c/99af9cd03aaf6a856fdfea9d27802f24.jpg" },
    { itemCode: "B1046", itemName: "Sprite", price: 1500.00, discount: 3 ,img:"https://i.pinimg.com/736x/da/29/54/da29549b7fd367669b7d8502d9d0028c.jpg"},
    { itemCode: "B1047", itemName: "Mirinda", price: 850.00, discount: 7 ,img:"https://i.pinimg.com/736x/99/0b/46/990b466538fbdc1f4b6722a6a393e908.jpg"}
  ];
/* <button type="button" class="btn btn-success px-3">Add to Cart</button> */
  const burger = document.getElementById("Burger");
  const submarines = document.getElementById("Submarines");
  const fries = document.getElementById("Fries");
  const pasta = document.getElementById("Pasta");
  const chicken = document.getElementById("Chicken");
  const beverages = document.getElementById("Beverages");


  if (burger) {
    Burger.forEach(e => {
      burger.innerHTML += `
        <div class="card">
        <img src="${e.img}" class="rounded-2 fs-3" alt="Card Image">
        (${e.itemCode})
        <h3 class="card-title text-center fw-bold">${e.itemName}</h3>
        <h5>Rs.${e.price}/=</h5>
        </div>
      `;
    });
  }
  

  Chicken.forEach(e =>{
    chicken.innerHTML += `
      <div class="card">
      <img src="${e.img}" class="rounded-2 fs-3" alt="Card Image">
      (${e.itemCode})
      <h3 class="card-title text-center fw-bold">${e.itemName}</h3>
      <h5>Rs.${e.price}/=</h5>
      
    </div>
    `;
  });

  Pasta.forEach(e =>{
    pasta.innerHTML += `
      <div class="card">
      <img src="${e.img}" class="rounded-2 fs-3" alt="Card Image">
      (${e.itemCode})
      <h3 class="card-title text-center fw-bold">${e.itemName}</h3>
      <h5>Rs.${e.price}/=</h5>
      
    </div>
    `;
  });

  Fries.forEach(e =>{
    fries.innerHTML += `
      <div class="card">
      <img src="${e.img}" class="rounded-2 fs-3" alt="Card Image">
      (${e.itemCode})
      <h3 class="card-title text-center fw-bold">${e.itemName}</h3>
      <h5>Rs.${e.price}/=</h5>
      
    </div>
    `;
  });

  Submarines.forEach(e =>{
    submarines.innerHTML += `
      <div class="card">
      <img src="${e.img}" class="rounded-2 fs-3" alt="Card Image">
      (${e.itemCode})
      <h3 class="card-title text-center fw-bold">${e.itemName}</h3>
      <h5>Rs.${e.price}/=</h5>
      
    </div>
    `;
  });

  Burger.forEach(e =>{
    burger.innerHTML += `
      <div class="card">
      <img src="${e.img}" class="rounded-2 fs-3" alt="Card Image">
      (${e.itemCode})
      <h3 class="card-title text-center fw-bold">${e.itemName}</h3>
      <h5>Rs.${e.price}/=</h5>
      
    </div>
    `;
  });

  // ========================================================================

let Items = [];

let PointIndex = -1;

function loadItemsFromJSON() {
    fetch('items.json')
        .then(response => response.json())
        .then(data => {
            if (!localStorage.getItem('items')) {
                Items = data;
                refreshTable();
                saveItemsToLocalStorage();
            }
        })
        .catch(error => console.error('Error loading items:', error));
}

document.addEventListener('DOMContentLoaded', function() {
    loadItemsFromLocalStorage();  
    if (!Items.length) {
        loadItemsFromJSON(); 
    }
});

document.getElementById('itemForm').addEventListener('submit', function(e) {
    e.preventDefault();

    const itemno = document.getElementById('itemno').value.trim();
    const itemtype = document.getElementById('itemtype').value.trim();
    const name = document.getElementById('name').value.trim();
    const price = document.getElementById('price').value.trim();
    const image = document.getElementById('image').files[0];

    if (itemno === '' || itemtype === '' || name === '' || price === '' || !image) {
        alert('Please fill in all fields and select an image');
        return;
    }

    const reader = new FileReader();
    reader.readAsDataURL(image);
    reader.onload = function() {
        const imageUrl = reader.result;
        
        if (PointIndex === -1) {
            addItem({ itemno, itemtype, name, price, imageUrl });
        } else {
            updateItem(PointIndex, { itemno, itemtype, name, price, imageUrl });
            document.querySelector('#itemForm button').innerText = 'Add Item';
            PointIndex = -1;
        }

        document.getElementById('itemForm').reset();
    };
});

function addItem(item) {
    Items.push(item);
    addItemToTable(item, Items.length - 1);
    saveItemsToLocalStorage();
    console.log('Menu page updated');
}

function updateItem(index, updatedItem) {
    Items[index] = updatedItem;
    updateItemInTable(index, updatedItem);
    saveItemsToLocalStorage();
    console.log('Menu page updated');
}

function addItemToTable(item, index) {
    const tableBody = document.querySelector('#itemTable tbody');
    const row = document.createElement('tr');

    row.innerHTML = `
        <td>${item.itemno}</td>
        <td>${item.itemtype}</td>
        <td>${item.name}</td>
        <td>${item.price}</td>
        <td><img src="${item.imageUrl}" alt="${item.name}" class="item-image"></td>
        <td>
            <button class="btn btn-sm btn-outline-primary" onclick="editItem(${index})">✏️</button>
            <button class="btn btn-sm btn-outline-danger" onclick="deleteItem(${index})">🗑️</button>
        </td>
    `;

    tableBody.appendChild(row);
}

function updateItemInTable(index, updatedItem) {
    const tableBody = document.querySelector('#itemTable tbody');
    const row = tableBody.children[index];

    row.innerHTML = `
        <td>${updatedItem.itemno}</td>
        <td>${updatedItem.itemtype}</td>
        <td>${updatedItem.name}</td>
        <td>${updatedItem.price}</td>
        <td><img src="${updatedItem.imageUrl}" alt="${updatedItem.name}" class="item-image"></td>
        <td>
            <button class="btn btn-sm btn-outline-primary" onclick="editItem(${index})">✏️</button>
            <button class="btn btn-sm btn-outline-danger" onclick="deleteItem(${index})">🗑️</button>
        </td>
    `;
}

function editItem(index) {
    const item = Items[index];
    document.getElementById('itemno').value = item.itemno;
    document.getElementById('itemtype').value = item.itemtype;
    document.getElementById('name').value = item.name;
    document.getElementById('price').value = item.price;

    document.querySelector('#itemForm button').innerText = 'Update Item';
    PointIndex = index;
}

function deleteItem(index) {
    Items.splice(index, 1);
    refreshTable();
    saveItemsToLocalStorage();
    console.log('Menu page updated');
}

function refreshTable() {
    const tableBody = document.querySelector('#itemTable tbody');
    tableBody.innerHTML = '';
    Items.forEach((item, index) => addItemToTable(item, index));
}

function saveItemsToLocalStorage() {
    localStorage.setItem('items', JSON.stringify(Items));
}

function loadItemsFromLocalStorage() {
    const storedItems = localStorage.getItem('items');
    if (storedItems) {
        Items = JSON.parse(storedItems);
        refreshTable();
    }
}

function searchItem() {
    const searchInput = document.getElementById('searchInput').value.toLowerCase();
    const tableRows = document.querySelectorAll('#itemTable tbody tr');

    tableRows.forEach((row, index) => {
        const name = row.cells[2].innerText.toLowerCase();
        if (name.includes(searchInput)) {
            row.style.display = '';
        } else {
            row.style.display = 'none';
        }
    });
}
